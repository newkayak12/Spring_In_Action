# 18. Junit

## 18.1 단위테스트란?
단위 테스트는 프로그램의 기본 단위인 모듈(Module)을 테스트하는 것이다. 구현 단계에서 각 모듈의 개발을 완료하고 명세서의 내용대로 정확히 구현되었는지를 테스트한다.

### 단위 테스트의 장점
1. 개발 초기에 문제를 발견할 수 있게 해준다.
2. 개발자가 나중에 코드를 리팩토링하거나 라이브러리 업데이트 등에서 기존 기능이 올바르게 작동하는지 확인할 수 있다.
3. 기능에 대한 불확실성을 감소시킬 수 있다.
4. 시스템에 대한 실제 문서를 제공한다.

### 단위 테스트를 하지 않는다면?
1. 개발 단계가 번거로워진다.
2. 개발자가 만들 기능을 보호할 수 없다.


 Junit는 자바 환경에서 손쉽게 단위 테스트를 할 수 있도록 도와준다.

### 메소드
- `assertArrayEquals(a,b)` : 배열 A, B가 같은지 확인
- `assertEquals(a,b)` : 객체 A와 B가 같은지 확인
- `assertEquals(a,b,c)` : 객체 A와 B 값이 일치함을 확인(a: 예상값, b: 결과값, c: 오차범위)
- `assertSame(a,b)`: 객체 A와 B가 같은 객체임을 확인
- `assertTrue(a)` : 조건 A가 참인지 확인
- `assertNotNull(a)` : 객체 A가 Null이 아님을 확인

### 기본 어노테이션
- `@Test` : 테스트를 만드는 모듈 역할
- `@SrpingBootTest` : SpringBoot의 테스트 환경에서 의존성을 주입
- `@DisplayName` : 테스트 클래스 또는 테스트 메소드의 사용자 정의 표시 이름을 정의
- `@ExtendWith` : 사용자 정의 확장명을 등록하는데 사용
- `@BeforeEach` : 각 테스트 메소드 전에 실행됨
- `@AfterEach` : 각 테스트 메소드 후에 실행됨을 나타냄
- `@BeforeAll` : 현재 클래스의 모든 테스트 메소드 전에 실행됨을 나타냄
- `@AfterAll` : 현재 클래스의 모든 테스트 메소드 후에 실행됨을 나타냄
- `@Disable` : 테스트 클래스 또는 메소드를 비활성화

### ServiceLayer에서 의존성 주입이 실패하는 경우
@Value와 같이 주입이 실패하면 (SpringContext가 올라가지 않아서) `ReflectionTestUtils`를 사용해서 리플렉션으로 강제로 주입해주면 된다.


### 어노테이션
`@Transaction` 으로 테스트 시 저장하는 경우를 롤백할 수 있다.
`@Rollback(value="true")`로 롤백 여부를 결정할 수 있다.
`@Order` @Test가 지정된 메소드들은 순서 보장이 되지 않는다. 따라서 순서를 지정할 필요가 생길 수 있다. 
예를 들어서 저장 -> 수정 -> 삭제 순으로 테스트하는 경우라면 '순서'가 꽤나 중요하다. @Order(순서)로 메소드 실행 순서를 정해줄 수 있다. 



